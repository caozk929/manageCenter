<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.zjht.manager.dao.UserDao">

   <resultMap id="BaseResultMap" type="com.zjht.manager.entity.User">
	   <id column="id" property="id" javaType="java.lang.Long"></id>
	   <result column="user_name" property="userName" javaType="java.lang.String"></result>
	   <result column="password" property="userPwd" javaType="java.lang.String"></result>
	   <result column="nick_name" property="nickName" javaType="java.lang.String"></result>
   </resultMap>
  
   <sql id="Base_Column_List"> 
		id,nick_name,password,mobile,user_name,type,email,create_time,update_time,remarks
   </sql>
  
   <insert id="insert" parameterType="com.zjht.manager.entity.User">
	 <selectKey resultType="String"  order="BEFORE" keyProperty="userId" >
		 select  lpad(nextval('SEQ_USERS'),11,'0') as id
	 </selectKey>
	 insert into t_user (id,mobile) values(#{id},#{mobile)
   </insert>
   
   <update id="update" parameterType="com.zjht.manager.entity.User">

   </update>
   
   <delete id="delete" parameterType="java.lang.String">
   		update t_user set isdelete='1' where userId=#{userId,jdbcType=VARCHAR}
   </delete>
	<select id="getUserById" parameterType="java.lang.Long" resultMap="BaseResultMap">
		SELECT
		<include refid="Base_Column_List" />
		from t_user where id=#{userId}
	</select>

	<select id="getUserByUserName" parameterType="java.lang.String" resultMap="BaseResultMap">
		SELECT
		<include refid="Base_Column_List" />
		from t_user where user_name=#{userName}
	</select>
</mapper>
